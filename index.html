<script>
const OFFBOARD = 0
const WHITE = 1
const BLACK = 2
const MAN = 4
const KING = 8
const EMPTY = 16
const CHANGECOLOR = 3


// 5s go from right to left
// 6s go from left to right

// actual
// +4 Capture Up and Left
// +5 Capture Up and Right
// -4 Capture Down and Right
// -5 Capture Down and Left 


// in my view
// -5 Capture Down and Left 
 

var board = new Array(46);

const coord2sq = {
  'b8': 5,  'd8': 6, 'f8': 7, 'h8': 8,
  'a7': 10, 'c7': 11, 'e7': 12, 'g7': 13,
  'b6': 14, 'd6': 15, 'f6': 16, 'h6': 17,
  'a5': 19, 'c5': 20, 'e5': 21, 'g5': 22,
  'b4': 23, 'd4': 24, 'f4': 25, 'h4': 26,
  'a3': 28, 'c3': 29, 'e3': 30, 'g3': 31,
  'b2': 32, 'd2': 33, 'f2': 34, 'h2': 35,
  'a1': 37, 'c1': 38, 'e1': 39, 'g1': 40,
};

const sq2coord = {
  5:  'b8', 6:  'd8', 7:  'f8', 8:  'h8',
  10: 'a7', 11: 'c7', 12: 'e7', 13: 'g7',
  14: 'b6', 15: 'd6', 16: 'f6', 17: 'h6',
  19: 'a5', 20: 'c5', 21: 'e5', 22: 'g5',
  23: 'b4', 24: 'd4', 25: 'f4', 26: 'h4',
  28: 'a3', 29: 'c3', 30: 'e3', 31: 'g3',
  32: 'b2', 33: 'd2', 34: 'f2', 35: 'h2',
  37: 'a1', 38: 'c1', 39: 'e1', 40: 'g1',
}


function printBoard() {
  let boardStr = '';
  let pieces = ['#', '', '', '', '', 'o', 'x', '', '', 'O', 'X', '',  '', '', '', '', '.'];
  boardStr += '8  ';  for (let sq = 5; sq < 9; sq++) boardStr +=  '   ' + pieces[board[sq]]; boardStr += '\n';
  boardStr += '7   '; for (let sq = 10; sq < 14; sq++) boardStr +=  pieces[board[sq]] + '   '; boardStr += '\n';
  boardStr += '6  ';  for (let sq = 14; sq < 18; sq++) boardStr += '   ' + pieces[board[sq]]; boardStr += '\n';
  boardStr += '5   '; for (let sq = 19; sq < 23; sq++) boardStr += pieces[board[sq]] + '   '; boardStr += '\n';
  boardStr += '4  '; for (let sq = 23; sq < 27; sq++) boardStr += '   ' + pieces[board[sq]]; boardStr += '\n';
  boardStr += '3   '; for (let sq = 28; sq < 32; sq++) boardStr += pieces[board[sq]] + '   '; boardStr += '\n';
  boardStr += '2  '; for (let sq = 32; sq < 36; sq++) boardStr += '   ' + pieces[board[sq]]; boardStr += '\n';
  boardStr += '1   '; for (let sq = 37; sq < 41; sq++) boardStr += pieces[board[sq]] + '   '; boardStr += '\n';
  boardStr += '\n    a b c d e f g h'; console.log(boardStr);
}

function initBoard() {
  for(let sq = 0; sq < 46; sq++) board[sq] = OFFBOARD;
  for(let sq = 5; sq <= 40; sq++) board[sq] = EMPTY;
  for(let sq = 5; sq <= 40; sq++) if (board[sq] == 0) board[sq] = EMPTY;
  for(let sq = 9; sq <= 36; sq += 9) board[sq] = OFFBOARD;
}

function createMove() {
  return {l: 0, m: new Array(10), path: new Array(10)};
}

function generateQuiets(color) {
  let m = 0;
  let quiets = [];
  if (color == BLACK) {
    for (let sq = 5; sq <= 40; sq++) {
      if ((board[sq] & BLACK) != 0) {
        if ((board[sq] & MAN) != 0) {
          // +4 Move up & left
          if ((board[sq+4] & EMPTY) != 0) {
            let move = createMove(); move.l = 2;
            if (sq > 32) m = (BLACK|KING); else m = (BLACK|MAN);
            m = m << 8;  m += (sq + 4); move.m[1] = m;
            m = (BLACK|MAN); m = m << 8; m += sq; move.m[0] = m;
            quiets.push(move)
          }
        }
      }
    }
  } return quiets;
}

function makeMove(move) {
  let sq, after;
  sq = move.m[0] & 255;
  console.log(sq2coord[sq])
  
  sq = move.m[1] & 255;
  
}

initBoard();


board[coord2sq['d4']] = BLACK|MAN

// +5 down left


//board[   coord2sq['d4'] - 5   ] = BLACK|MAN


printBoard();
generateQuiets(BLACK);



</script>













